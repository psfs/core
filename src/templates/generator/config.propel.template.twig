<?php
\PSFS\bootstrap::load();
/**
 * Autogenerated config file
 */
$serviceContainer = \Propel\Runtime\Propel::getServiceContainer();
$serviceContainer->checkVersion(2);
$serviceContainer->setAdapterClass('{{ module }}', 'mysql');
$manager = new \Propel\Runtime\Connection\ConnectionManagerSingle('{{ module }}');
$manager->setConfiguration([
    'dsn' => 'mysql:host=' . \PSFS\base\config\Config::getParam('db.host', null, '{{ module|lower }}') . ';port=' . \PSFS\base\config\Config::getParam('db.port', null, '{{ module|lower }}') . ';dbname=' . \PSFS\base\config\Config::getParam('db.name', null, '{{ module|lower }}') . '',
    'user' => \PSFS\base\config\Config::getParam('db.user', null, '{{ module|lower }}'),
    'password' => \PSFS\base\config\Config::getParam('db.password', null, '{{ module|lower }}'),
    'classname' => \PSFS\base\types\helpers\PdoHelper::class,
    'model_paths' => array(
        0 => 'src',
        1 => 'vendor',
    ),
]);
$manager->setName('{{ module }}');
$serviceContainer->setConnectionManager($manager);
$serviceContainer->setDefaultDatasource('{{ module }}');
$serviceContainer->setLoggerConfiguration('defaultLogger', [
	'type' => 'rotating_file',
	'path' => LOG_DIR . '/db.log',
	'level' => 300,
	'max_files' => \PSFS\base\config\Config::getParam('db.log.max_files', 10, '{{ module|lower }}'),
	'bubble' => true,
]);

require_once 'loadDatabase.php';
